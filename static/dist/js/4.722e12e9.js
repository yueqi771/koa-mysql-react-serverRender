(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{174:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Button=void 0;var l,r,o=p(a(64)),n=p(a(4)),s=p(a(8)),u=p(a(3)),d=p(a(5)),c=a(1),i=p(c),f=a(119),m=p(a(0));function p(e){return e&&e.__esModule?e:{default:e}}a(514);var w=(r=l=function(e){function t(){return(0,n.default)(this,t),(0,u.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,d.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){var e=this.props,t=e.loading,a=e.text,l=e.handleClick;return i.default.createElement("div",{className:"button"},t?i.default.createElement("p",{className:"loading-btn"},i.default.createElement(f.Icon,{type:"loading"}),i.default.createElement("i",null,a)):null,i.default.createElement("p",{className:"btn-text",onClick:l},a))}}]),t}(c.Component),l.propTypes={text:m.default.string,handleClick:m.default.func,loading:m.default.bool},r);t.Button=w},251:function(e,t,a){"use strict";t.__esModule=!0,t.default={mobile:/^1[3|4|5|6|7|8][0-9]{9}$/,mobileAbroad:/^[0-9]{1,}$/,number:/^[0-9]{1,}$/,verify:/[0-9]{4}/,password:/(?!^[0-9]+$)(?!^[A-z]+$)(?!^[^A-z0-9]+$)^.{8,16}$/}},514:function(e,t){},518:function(e,t){},523:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=y(a(2)),r=y(a(6)),o=y(a(64)),n=y(a(4)),s=y(a(3)),u=y(a(8)),d=y(a(5)),c=a(1),i=y(c),f=y(a(522)),m=y(a(0)),p=a(119),w=a(174),h=y(a(251)),E=y(a(105));function y(e){return e&&e.__esModule?e:{default:e}}a(518);var v=p.Form.Item,b=p.Select.Option,g=function(e){function t(e,a){(0,n.default)(this,t);var l=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,a));return l.vertifyMobile=function(e){var t=e.target?e.target.value:l.state.mobile;return h.default.mobile.test(t)?(l.setState({allowMobile:!0,mobile:t}),!0):(l.setState({allowMobile:!1,mobile:t}),!1)},l.vertifyEmpty=function(e,t,a){var o,n=e?e.target.value:l.state[t];return""==n?(l.setState((0,r.default)({},a,!1),function(){}),!1):(l.setState((o={},(0,r.default)(o,a,!0),(0,r.default)(o,t,n),o)),!0)},l.vertifyPassword=function(e){var t=e.target?e.target.value:l.state.password;return console.log(t.trim().legnth),t.trim().length<6?(l.setState({password:t,allowPassword:!1}),!1):(l.setState({password:t,allowPassword:!0}),!0)},l.vertifyRepassword=function(e){var t=e.target?e.target.value:l.state.repassword;return t!=l.state.password?(l.setState({repassword:t,allowRepassword:!1}),!1):(l.setState({repassword:t,allowRepassword:!0}),!0)},l.confirmRegister=function(e){var t=l.state,a=t.mobile,r=(t.code,t.nickName),o=t.wechat,n=t.password,s=t.repassword;l.vertifyMobile(a)&&l.vertifyEmpty(null,"code","allowCode")&&l.vertifyEmpty(null,"nickName","allowName")&&l.vertifyEmpty(null,"wechat","allowWechat")&&l.vertifyPassword(n)&&l.vertifyRepassword(s)&&E.default.post({url:"/register",data:{mobile:a,nickName:r,wechat:o,password:n}}).then(function(e){1==e.code?(p.message.success("注册成功"),l.context.router.history.push("/index")):p.message.error(e.message)})},l.state={mobile:"",allowMobile:!0,code:"",allowCode:!0,nickName:"",allowName:!0,wechat:"",allowWechat:!0,password:"",allowPassword:!0,repassword:"",allowRepassword:!0,redirectTo:""},l}return(0,d.default)(t,e),(0,u.default)(t,[{key:"shouldComponentUpdate",value:function(e,t){return!_.isEqual(this.props,e)||!_.isEqual(this.state,t)}}]),(0,u.default)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.state,r=a.allowMobile,o=a.allowCode,n=a.allowName,s=a.allowWechat,u=a.allowPassword,d=a.allowRepassword,c={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:16}}},m=t("prefix",{initialValue:"86"})(i.default.createElement(p.Select,{style:{width:70}},i.default.createElement(b,{value:"86"},"+86")));return i.default.createElement("div",{className:"register"},i.default.createElement(f.default,null,i.default.createElement("title",null,"祈风-注册")),i.default.createElement("div",{className:"shadow",style:{backgroundImage:"url(http://localhost:3000/images/bk.jpg)"}}),i.default.createElement("div",{className:"register-container"},i.default.createElement("p",{className:"title"},"欢迎注册"),i.default.createElement(p.Form,{onSubmit:this.handleSubmit},i.default.createElement(v,(0,l.default)({},c,{label:"手机"}),i.default.createElement(p.Input,{addonBefore:m,style:{width:"100%"},placeholder:"Enter your mobile",onChange:function(t){return e.vertifyMobile(t)}}),r?null:i.default.createElement("p",{className:"error-tip"},"请输入正确的手机号")),i.default.createElement(v,(0,l.default)({},c,{label:"验证码",className:"code-wrapper",extra:"We must make sure that your are a human."}),i.default.createElement(p.Row,{gutter:4},i.default.createElement(p.Col,{span:12},i.default.createElement(p.Input,{placeholder:"Enter your code",onChange:function(t){e.vertifyEmpty(t,"code","allowCode")}})),i.default.createElement(p.Col,{span:10},i.default.createElement(w.Button,{className:"get-code",text:"获取验证码",loading:!1}))),o?null:i.default.createElement("p",{className:"error-tip",style:{bottom:"-42px"}},"请输入验证码")),i.default.createElement(v,(0,l.default)({},c,{label:i.default.createElement("span",null,"昵称 ",i.default.createElement(p.Tooltip,{title:"What do you want others to call you?"},i.default.createElement(p.Icon,{type:"question-circle-o"})))}),i.default.createElement(p.Input,{placeholder:"Enter your nickName",onChange:function(t){e.vertifyEmpty(t,"nickName","allowName")}}),n?null:i.default.createElement("p",{className:"error-tip"},"请输入您的昵称")),i.default.createElement(v,(0,l.default)({},c,{label:"微信"}),i.default.createElement(p.Input,{type:"text",placeholder:"Enter your wechat",onChange:function(t){e.vertifyEmpty(t,"wechat","allowWechat")}}),s?null:i.default.createElement("p",{className:"error-tip"},"请输入您的微信，方便发送奖励")),i.default.createElement(v,(0,l.default)({},c,{label:"密码"}),i.default.createElement(p.Input,{type:"password",placeholder:"Enter your password",onChange:function(t){return e.vertifyPassword(t)}}),u?null:i.default.createElement("p",{className:"error-tip"},"请输入至少6位数的密码")),i.default.createElement(v,(0,l.default)({},c,{label:"确认密码"}),i.default.createElement(p.Input,{type:"password",placeholder:"Confirm your password",onChange:function(t){return e.vertifyRepassword(t)}}),d?null:i.default.createElement("p",{className:"error-tip"},"两次密码不一致")),i.default.createElement(v,{className:"submit-wrapper"},i.default.createElement("p",{className:"user-tip"},"已有账号?",i.default.createElement("span",{className:"link",onClick:function(t){console.log(e.context.router.history),e.context.router.history.push("/login")}},"去登录")),i.default.createElement(w.Button,{text:"注册",loading:!1,handleClick:this.confirmRegister})))))}}]),t}(c.Component);g.contextTypes={router:m.default.object.isRequired};var N=p.Form.create()(g);t.default=N}}]);